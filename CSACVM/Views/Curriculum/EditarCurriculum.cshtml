@using CSACVM.Modelos.ViewModels
@model CSACVM.Modelos.ViewModels.CurriculumModelVM
<link rel="stylesheet" type="text/css" href="~/css/datatables.min.css" />
<link rel="stylesheet" type="text/css" href="~/css/jquery.imagesloader.css" />
<link rel="stylesheet" type="text/css" href="~/css/comunes.css" />
<form method="POST" enctype="multipart/form-data" id="formCurriculum" name="formCurriculum">
    <div class="row">
        <div class="row ">
            <label class="form-label fw-bold">Título Currículum</label>
            <input class="form-control w-50" type="text" asp-for="@Model.Titulo" />
            <input class="form-control w-50" type="text" asp-for="@Model.IdCurriculum" hidden />
        </div>
        <hr class="mt-3"/>
        <div class="row">
            <div class="accordion" id="accordionCurriculum">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="accHeaderUsuario">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseUsuario"
                                aria-expanded="true" aria-controls="collapseUsuario">
                            Información del Usuario
                        </button>
                    </h2>
                    <div id="collapseUsuario" class="accordion-collapse" aria-labelledby="accHeaderUsuario" data-bs-parent="#accordionCurriculum">
                        <div class="accordion-body">
                            <div class="row">
                                <div class="col-2 d-flex align-items-center justify-content-center" id="colImagenCV" data-type="image-model">
                                    @if (Model.Foto != "") {
                                        var ruta = "/ImagenPerfilCV/" + Model.Foto.Split("/")[2];
                                        <div class="divFotoNoBorder foto-message d-flex justify-content-center form-group" id="divFotoCV">
                                            <label for="files" data-type="imagesloader">
                                                <img class="tamImagen" src="@ruta"><input type="file" id="files" name="fotoCurriculum" accept=".jpg,.jpeg,.png" />
                                            </label>
                                        </div>
                                    } else {
                                        <label class="divFoto foto-message d-flex justify-content-center align-items-center" id="divFotoCV" data-type="imagesloader">
                                            <input name="fotoCurriculum" id="files" type="file" accept=".jpg,.jpeg,.png" data-button=""/>
                                            Añadir Imagen
                                        </label>
                                    }
                                </div>
                                <div class="col-9">
                                    @*<div class="row mt-2">
                                        <h5>- Datos Personales -</h5>
                                    </div>*@
                                    <div class="row">
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Nombre:</label>
                                            <input class="form-control" asp-for="@Model.UsuarioCV.Nombre" placeholder="Nombre" aria-required="true" />
                                        </div>
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Primer Apellido:</label>
                                            <input class="form-control" asp-for="@Model.UsuarioCV.Apellido1" placeholder="Primer Apellido" aria-required="true" />
                                        </div>
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Segundo Apellido:</label>
                                            <input class="form-control" asp-for="@Model.UsuarioCV.Apellido2" placeholder="Segundo Apellido" aria-required="true" />
                                        </div>
                                    </div>
                                    @*<div class="row mt-4">
                                        <h5>- Contacto -</h5>
                                    </div>*@
                                     <div class="row mt-3">
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Teléfono:</label>
                                            <input class="form-control" asp-for="@Model.UsuarioCV.Telefono" placeholder="Telefono" aria-required="true" />
                                        </div>
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Enlace:</label>
                                            <input class="form-control" asp-for="@Model.UsuarioCV.EnlaceContacto" placeholder="Enlace Contacto" aria-required="true" />
                                        </div>
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Email:</label>
                                            <input class="form-control" asp-for="@Model.UsuarioCV.Email" placeholder="Email" aria-required="true" type="email" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                           @* <div class="row mt-3">
                                <h5>- Otros datos -</h5>
                            </div>*@
                            <div class="row mt-3">
                                <div class="col-4 pe-2">
                                    <label class="form-label fw-bold">Nacionalidad:</label>
                                    <input class="form-control" asp-for="@Model.UsuarioCV.Nacionalidad" placeholder="Nacionalidad" aria-required="true" />
                                </div>                    
                                <div class="col-4 pe-2">
                                    <label class="form-label fw-bold">Profesión:</label>
                                    <input class="form-control" asp-for="@Model.UsuarioCV.Profesion" placeholder="Profesion" aria-required="true" />
                                </div>
                                <div class="col-4 pe-2">
                                    <label class="form-label fw-bold">Fecha Nacimiento:</label>
                                    <input class="form-control" asp-for="@Model.UsuarioCV.FechaNacimiento" placeholder="Nacimiento" aria-required="true" type="date"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="accHeaderFormacion">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFormacion"
                                aria-expanded="true" aria-controls="collapseFormacion">
                            Formación Académica
                        </button>
                    </h2>
                    <div id="collapseFormacion" class="accordion-collapse" aria-labelledby="accHeaderFormacion" data-bs-parent="#accordionCurriculum">
                        <div class="accordion-body" id="bodyFormacion">
                            @if (Model.ListaFormacionCV.Count > 0) {
                                var contadorInputs = 1;
                                foreach(FormacionCV formacion in Model.ListaFormacionCV) {
                                    <div class="container formacionContainerClass" id="formacionContainer_@contadorInputs">
                                        <div class="row">
                                            <div class="col-4 pe-2">
                                                <label class="form-label fw-bold">Grado/Estudios:</label>
                                                <input class="form-control" placeholder="Grado" aria-required="true" name="gradoFormacion_@contadorInputs"/>
                                            </div>
                                            <div class="col-4 pe-2">
                                                <label class="form-label fw-bold">Observaciones:</label>
                                                <input class="form-control" placeholder="Observaciones" aria-required="true" name="observacionesFormacion_@contadorInputs" />
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-4 pe-2">
                                                <label class="form-label fw-bold">Fecha Desde:</label>
                                                <input class="form-control" placeholder="Desde" aria-required="true" type="month" name="fechaDesdeFormacion_@contadorInputs"/>
                                            </div>
                                            <div class="col-4 pe-2">
                                                <label class="form-label fw-bold">Fecha Hasta:</label>
                                                <input class="form-control" placeholder="Hasta" aria-required="true" type="month" name="fechaHastaFormacion_@contadorInputs"/>
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            
                                            <div class="col-4">
                                                <button class="btn btn-primary mx-2 btnRojo" onclick="removeFormacion(@contadorInputs)" name="btnSubFormacion" id="btnSubFormacion" ><i class="fas fa-minus me-3">Quitar Formación</i></button>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    contadorInputs++;
                                }
                            } else {
                                <div class="container formacionContainerClass" id="formacionContainer_1">
                                    <div class="row">
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Grado/Estudios:</label>
                                            <input class="form-control" placeholder="Grado" aria-required="true" />
                                        </div>
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Observaciones:</label>
                                            <input class="form-control" placeholder="Observaciones" aria-required="true" />
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Fecha Desde:</label>
                                            <input class="form-control" placeholder="Desde" aria-required="true" type="month" />
                                        </div>
                                        <div class="col-4 pe-2">
                                            <label class="form-label fw-bold">Fecha Hasta:</label>
                                            <input class="form-control" placeholder="Hasta" aria-required="true" type="month" />
                                        </div>
                                    </div>
                                    
                                </div>
                                <hr>
                                <div class="row mt-3">
                                    <div class="col-4">
                                        <a class="btn btn-primary w-50" href="javascript:addFormacion();" id="btnAddFormacion"><i class="fa-solid fa-plus me-3"></i>Añadir Formación</a>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        
        </div>
        <div class="row d-flex justify-content-end mt-4">
            <div class="col-lg-3 col-md-3 col-sm-4 text-end">
                <button class="btn btn-success bg-verde font-size-l btn-w-solicitud" formmethod="post" onclick="CargarFotos()"><i class="fa-solid fa-floppy-disk me-2"></i>GUARDAR CAMBIOS</button>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript" src="~/js/jquery.imagesloader-1.0.1.js"></script>
<script type="text/javascript" src="~/js/Curriculum/curriculum.js" asp-append-version="true"></script>
<script type="text/javascript" src="~/js/datatables.min.js" asp-append-version="true"></script>

